# SynthepseAI プロジェクト要件定義書

## 1. プロジェクト概要

### 1.1 プロジェクト名
SynthepseAI - 自己修正機能を持つ自律型AIエージェントシステム

### 1.2 目的
複雑なタスクを自動的に計画・実行し、エラーから学習しながら目標を達成する自律型AIエージェントシステムの構築。LLLMコンセプトに基づき、複数の技術を統合して知的エコシステムを実現する。

### 1.3 ビジョン
単純な目標設定から、AIが自律的に計画・実行・学習・改善を行い、人間の介入を最小限に抑えながら複雑なタスクを完遂できるシステムの実現。

### 1.4 主要なステークホルダー
- 開発者：プログラミングタスクの自動化を求める開発者
- データサイエンティスト：データ分析・処理タスクの自動化を求める専門家
- 研究者：AI技術の実験・研究を行う研究者
- 企業：業務自動化を求める企業

## 2. 機能要件

### 2.1 コア機能

#### 2.1.1 自動タスク計画・実行
- **説明**: 複雑な目標を小さなタスクに分解し、各タスクに対してPythonコードを自動生成・実行
- **優先度**: 高
- **実装状況**: 実装済み

#### 2.1.2 自己修正機能
- **説明**: 実行中のエラーを検出し、自動的に修正を試みる
- **優先度**: 高
- **実装状況**: 実装済み

#### 2.1.3 経験からの学習
- **説明**: 過去のエラーパターンと成功したコード実装から学習し、新しいタスクに適用
- **優先度**: 高
- **実装状況**: 実装済み（GraphRAG）

#### 2.1.4 モジュール再利用
- **説明**: 成功したコードから再利用可能なモジュールを抽出し、新しいタスクで活用
- **優先度**: 中
- **実装状況**: 実装済み

#### 2.1.5 独立実行環境
- **説明**: 各プロジェクトが独自の仮想環境で実行され、依存関係の競合を防止
- **優先度**: 高
- **実装状況**: 実装済み

### 2.2 高度な機能

#### 2.2.1 LLLM統合
- **説明**: LLMと人間、ツール、複数のLLMネットワークを組み合わせた拡張知能システム
- **優先度**: 高
- **実装状況**: 実装済み

#### 2.2.2 知識編集（ROME）
- **説明**: 言語モデルの内部知識を直接編集し、事実や情報を更新
- **優先度**: 中
- **実装状況**: 実装済み

#### 2.2.3 自己反省的推論（COAT）
- **説明**: Chain-of-Action-Thoughtによる改善された推論と自己修正
- **優先度**: 中
- **実装状況**: 実装済み

#### 2.2.4 知識グラフ処理（R-GCN）
- **説明**: リレーショナルグラフ畳み込みネットワークによる高度な知識表現と検索
- **優先度**: 中
- **実装状況**: 実装済み

#### 2.2.5 Webクローリングと知識統合
- **説明**: TavilyとFirecrawl APIを使用した情報検索と知識ベースへの統合
- **優先度**: 中
- **実装状況**: 実装済み

### 2.3 サポート機能

#### 2.3.1 ロバストなモックモード
- **説明**: APIキーなしでもシームレスに動作し、外部依存なしで開発・テストが可能
- **優先度**: 中
- **実装状況**: 実装済み

#### 2.3.2 マルチレベルAPIフォールバック
- **説明**: Web検索とLLM APIの高度なフォールバックメカニズムによる継続的な動作
- **優先度**: 中
- **実装状況**: 実装済み

#### 2.3.3 自動知識グラフ生成
- **説明**: 知識グラフの自動作成・管理により、手動初期化が不要
- **優先度**: 低
- **実装状況**: 実装済み

## 3. 非機能要件

### 3.1 パフォーマンス要件
- **応答時間**: タスク実行の開始まで5秒以内
- **並行処理**: 複数のタスクを並行して実行可能
- **スケーラビリティ**: プロジェクト数の増加に対応可能

### 3.2 信頼性要件
- **エラー回復**: 自動エラー修正機能により95%以上のエラーを自動回復
- **データ永続性**: SQLiteによるタスクデータの永続化
- **フォールバック**: API障害時のモックモードへの自動切り替え

### 3.3 セキュリティ要件
- **環境分離**: 各プロジェクトの仮想環境による完全な分離
- **APIキー管理**: 環境変数による安全なAPIキー管理
- **コード実行**: サンドボックス環境でのコード実行

### 3.4 互換性要件
- **Python**: 3.9以上（3.12対応含む）
- **OS**: Windows、macOS、Linux対応
- **Docker**: Weaviate使用時のみ必要

### 3.5 使用性要件
- **CLI**: シンプルなコマンドラインインターフェース
- **設定**: JSONベースの簡潔な設定ファイル
- **ドキュメント**: 包括的なREADMEとAPI文書

## 4. システム構成

### 4.1 アーキテクチャ概要
- **エージェントシステム**: BaseAgent、ToolAgent、AutoPlanAgent
- **フローシステム**: BaseFlow、PlanningFlow
- **ツールシステム**: 各種実行・操作ツール
- **学習システム**: GraphRAG、モジュール管理、ROME、COAT、R-GCN
- **データベース**: SQLiteベースのタスク管理
- **環境管理**: プロジェクト別仮想環境

### 4.2 主要コンポーネント

#### 4.2.1 コアモジュール
- `auto_plan_agent.py`: 自己修正エージェント
- `base_agent.py`: ベースエージェント
- `planning_flow.py`: 計画フロー管理
- `llm.py`: LLM統合
- `graph_rag_manager.py`: GraphRAG管理

#### 4.2.2 ツールモジュール
- `python_execute.py`: Pythonコード実行
- `file_tool.py`: ファイル操作
- `web_crawling_tool.py`: Web情報取得
- `docker_execute.py`: Docker実行

#### 4.2.3 高度な機能モジュール
- `enhanced_persistent_thinking_ai.py`: 継続的思考AI
- `rome_model_editor.py`: 知識編集
- `coat_reasoner.py`: 自己反省的推論
- `rgcn_processor.py`: 知識グラフ処理

### 4.3 外部依存関係
- **必須**: OpenAI API（またはモックモード）
- **オプション**: Weaviate（GraphRAG用）
- **オプション**: Tavily/Firecrawl API（Web検索用）

## 5. 制約事項

### 5.1 技術的制約
- Python環境が必要
- Docker（Weaviate使用時）
- インターネット接続（API使用時）

### 5.2 運用制約
- APIキーの管理が必要（本番環境）
- リソース使用量の監視が推奨

## 6. 今後の拡張予定

### 6.1 短期目標（3ヶ月以内）
- GUI/Webインターフェースの追加
- より多くのLLMプロバイダーのサポート
- パフォーマンス最適化

### 6.2 中期目標（6ヶ月以内）
- 分散実行のサポート
- より高度な学習アルゴリズムの実装
- エンタープライズ機能の追加

### 6.3 長期目標（1年以内）
- マルチモーダル対応（画像、音声）
- 自律的なシステム最適化
- プラグインエコシステムの構築

## 7. リスクと対策

### 7.1 技術的リスク
- **リスク**: LLM APIの変更
- **対策**: 抽象化レイヤーとモックモード

### 7.2 セキュリティリスク
- **リスク**: 悪意のあるコード実行
- **対策**: サンドボックス環境と権限制限

### 7.3 運用リスク
- **リスク**: APIコストの増大
- **対策**: 使用量監視とキャッシング

## 8. 成功基準

### 8.1 定量的基準
- タスク成功率: 90%以上
- 自動エラー修正率: 95%以上
- 平均実行時間: 従来の50%削減

### 8.2 定性的基準
- ユーザーの満足度向上
- 開発効率の改善
- 学習曲線の短縮

---

**バージョン**: 1.0.0  
**作成日**: 2025-01-18  
**作成者**: Claude 4.1